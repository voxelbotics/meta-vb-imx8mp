From ef7d5cabcd066c5fa241e54c9fb813f8174ef9ec Mon Sep 17 00:00:00 2001
From: Dmitry Alexeyev <dimaa@voxelbotics.com>
Date: Thu, 12 Oct 2023 22:20:02 +0300
Subject: [PATCH] Do not start otbr-agent if there's no dongle. Limit number of
 failures

---
 src/agent/otbr-agent.service.in | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/agent/otbr-agent.service.in b/src/agent/otbr-agent.service.in
index a7533cc..c535054 100644
--- a/src/agent/otbr-agent.service.in
+++ b/src/agent/otbr-agent.service.in
@@ -1,6 +1,9 @@
 [Unit]
 Description=OpenThread Border Router Agent
+ConditionPathExists=/dev/ttyACM0
 ConditionPathExists=/usr/sbin/otbr-agent
+StartLimitIntervalSec=500
+StartLimitBurst=5
 Requires=dbus.socket
 After=dbus.socket
 
